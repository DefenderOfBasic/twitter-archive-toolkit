(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function r(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=r(t);fetch(t.href,n)}})();class f{constructor(){this.accountId=null,this.username=null,this.tweetsById={}}preprocessTweets(e){const r=[];for(let o=0;o<e.length;o++){const t=e[o].tweet;t.url=`https://x.com/${this.username}/status/${t.id}`,t.date=new Date(t.created_at),r.push(t),this.tweetsById[t.id]=t}return r}getThreads(e){const r=[];let o=0,t=0;for(let n=0;n<e.length;n++){const{in_reply_to_user_id_str:s,in_reply_to_status_id:c,full_text:d}=e[n];if(d.startsWith("RT")){o++;continue}if(s!=null&&s!=this.accountId){e[n].is_external_reply=!0,t++;continue}if(s==this.accountId){const u=c;if(!this.tweetsById[u]){console.error(`Error: failed to find tweet ${u}`);continue}if(this.tweetsById[u].is_external_reply){e[n].is_external_reply=!0,t++;continue}else this.tweetsById[u].nextTweet=e[n],e[n].parent=this.tweetsById[u]}r.push(e[n])}return{tweets:r,retweet_count:o,external_reply_count:t}}sortAscending(e){return e.sort(function(r,o){return r.date-o.date})}sortDescending(e){return e.sort(function(r,o){return o.date-r.date})}formatDate(e,r){return e.toLocaleDateString("en-US",r||{hour:"numeric",year:"numeric",month:"short",day:"2-digit"})}makeHTMLForTweet(e){return`<div class="tweet">
    <p>${e.full_text}</p>
    <div class="metadata">
      <p>${this.formatDate(e.date)}</p>
      <div class="toolbar">
        ${Number(e.retweet_count).toLocaleString()} üîÇ ${Number(e.favorite_count).toLocaleString()} ü§ç
        <a href="${e.url}" target="_blank" style="text-decoration:none">
          <svg width="20px" height="20px" viewBox="0 0 24 24" transform="translate(0 3)" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11 4H4V18C4 19.1046 4.89543 20 6 20H18C19.1046 20 20 19.1046 20 18V13" stroke="#292929" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/><path d="M9 15L20 4" stroke="#292929" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/><path d="M15 4H20V9" stroke="#292929" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/></svg>
        </a>
      </div>
    </div>
  </div>
  `}makeHTMLForThread(e){let r='<div class="thread">';for(;e;)r+=this.makeHTMLForTweet(e),e=e.nextTweet;return r+="</div>",r}getPopularityOverTime(e){const r=e.reduce((o,t)=>{const n=a(t.date),s=Number(t.favorite_count)+Number(t.retweet_count);return o[n]=(o[n]||0)+s,o},{});return p(Object.entries(r).map(o=>({x:o[0],y:o[1]})))}countTweetsPerDay(e){const r=e.reduce((t,n)=>{const s=a(n.date);return t[s]=(t[s]||0)+1,t},{});return Object.entries(r).sort((t,n)=>n[1]-t[1]).map(t=>({date:t[0],count:t[1]}))}countTweetsPerHour(e){const r=e.reduce((t,n)=>{const s=l(n.date);return t[s]=(t[s]||0)+1,t},{});return Object.entries(r).sort((t,n)=>n[1]-t[1]).map(t=>({date:t[0],count:t[1]}))}isTweetInteractingWith(e,r){const o=r.entities.user_mentions;if(r.in_reply_to_user_id==e)return!0;for(let t of o)if(t.id==e)return!0;return!1}}const a=i=>{const e=i.getFullYear(),r=(i.getMonth()+1).toString().padStart(2,"0"),o=i.getDate().toString().padStart(2,"0");return`${e}-${r}-${o}`},l=i=>{const e=i.getFullYear(),r=(i.getMonth()+1).toString().padStart(2,"0"),o=(i.getDate()+1).toString().padStart(2,"0"),t=i.getHours().toString().padStart(2,"0");return`${e}-${r}-${o}/${t}`},p=i=>i.sort((e,r)=>{const o=new Date(e.x),t=new Date(r.x);return o-t});export{f as U};
